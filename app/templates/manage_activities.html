{% extends "base.html" %}
{% block content %}

<section class="glass card pad">
	<h1 class="h1">Manage Activities</h1>
	<form class="row gap" method="get" action="/manage/activities">
		<label>
			<span>Category</span>
			<select name="category_id">
				<option value="">All</option>
				{% for c in categories %}
				<option value="{{ c.id }}" {% if selected_category_id and c.id == selected_category_id %}selected{% endif %}>{{ c.name }}</option>
				{% endfor %}
			</select>
		</label>
		<button class="btn" type="submit">Filter</button>
	</form>

	<form class="row gap mt" method="post" action="/manage/activities/add">
		<input type="text" name="name" placeholder="Activity name" required />
		<select name="category_id" required>
			<option value="" disabled selected>Category</option>
			{% for c in categories %}<option value="{{ c.id }}">{{ c.name }}</option>{% endfor %}
		</select>
		<button class="btn primary" type="submit">Add</button>
	</form>

	<table class="table mt">
		<thead><tr><th>Activity</th><th>Category</th><th>Actions</th></tr></thead>
		<tbody>
			{% for a in activities %}
			<tr>
				<td>{{ a.name }}</td>
				<td>{{ a.category.name }}</td>
				<td>
					<form method="post" action="/manage/activities/delete">
						<input type="hidden" name="activity_id" value="{{ a.id }}" />
						<input type="hidden" name="category_id" value="{{ a.category.id }}" />
						<button class="btn danger" type="submit">Delete</button>
					</form>
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</section>

{% endblock %}


